<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/buyerLayout/buyerLayoutWithoutSideBar}">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cart</title>
<script defer src="/buyer/js/cart.js"></script>
<script defer src="/buyer/js/handleActionCart.js"></script>
<link rel="stylesheet" href="/buyer/css/cart.css">
</head>
<body>
	<!-- Cart Start -->
	<div class="container-fluid pt-5" layout:fragment="content">

		<div class="row px-xl-5">
			<div class="col-lg-12 table-responsive mb-5">
				<table class="table table-bordered text-center mb-0">
					<thead class="bg-secondary text-dark">
						<tr>
							<th><input type="checkbox" id="check-all"></th>
							<th>Products</th>
							<th>Price</th>
							<th>Quantity</th>
							<th>Total</th>
							<th>Remove</th>
						</tr>
					</thead>
					<tbody class="align-middle">
						<tr th:each="item, index : ${cartItems}">
							<td><input class="check-box-item" type="checkbox"
								th:id="${item.id}" /></td>
							<td class="align-middle"><a
								class="d-flex justify-content-around align-items-center"
								th:href="@{/product/detail/{id}(id=${item.product.id})}"> <img
									class="img-fluid w-100" id="image-product"
									th:src="'data:image/png;base64,' + ${item.imageBase64}"
									alt="Background image" /> <span th:text="${item.product.name}">
								</span>
							</a></td>
							<td class="align-middle " th:text="${item.curPrice}"></td>
							<td class="align-middle"><input id="price-el" type="hidden"
								th:value="${item.product.price}" />
								<div class="input-group quantity mx-auto" style="width: 130px;">
									<div class="input-group-btn">
										<button class="btn btn-sm btn-primary btn-minus">
											<i class="fa fa-minus"></i>
										</button>
									</div>
									<input th:id="quantity-el" type="number"
										class="form-control form-control-sm bg-secondary text-center"
										th:value="${item.quantity}" th:max="${item.product.stock}"
										th:attr="oninput=|changeTotalPriceValue(${index.index})|"
									>
									<div class="input-group-btn">
										<button class="btn btn-sm btn-primary btn-plus">
											<i class="fa fa-plus"></i>
										</button>
									</div>
								</div>
							</td>
							<td class="align-middle price-el"><input id="total-price-el"
								value="" disabled="disabled" /></td>
							<td class="align-middle"><button th:id="${item.id}"
									class="btn btn-sm btn-primary delete-btn">
									<i class="fa fa-times"></i>
								</button></td>
						</tr>
					</tbody>
				</table>
				<!-- Cart empty-->
				<div th:if="${quantityOrder == 0}" class="d-flex justify-content-center align-items-center flex-column">
					<h3 class="mt-5 ">Your shopping cart is empty</h3>
					<a href="/home">
						<button class="btn btn-primary rounded mt-3">Go shopping now</button>
					</a>
				</div>
				<!-- Modal Check Permission -->
				<div class="modal modal-check-permission fade align-items-center"
					tabindex="-1" role="dialog" aria-labelledby="modalLabel"
					aria-hidden="true" style="background-color: rgba(0, 0, 0, 0.6)">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="modalLabel" style="
    								user-select: none;">Do you want to remove this item?</h5>
							</div>
							<div class="col-12 modal-footer d-flex justify-content-between">
								<button type="button" class="col-5 btn btn-primary accept-btn">Yes</button>
								<button type="button" class="col-5 btn btn-secondary close-btn"
									data-dismiss="modal">No</button>
							</div>
						</div>
					</div>
				</div>
				
				<!-- Modal Announcement-->
				<div th:if="${message}" class="modal modal-announce fade align-items-center show fade"
					tabindex="-1" role="dialog" aria-labelledby="modalLabel"
					aria-hidden="true" style="display:flex; background-color: rgba(0, 0, 0, 0.6)">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="exampleModalLabel" style="
    								user-select: none;" th:text="${message}"></h5>
							</div>
							<div class="col-12 modal-footer d-flex justify-content-between">
								<button type="button" class="btn btn-secondary close-announce-btn"
									data-dismiss="modal" style="width: 100%">Close</button>
							</div>
						</div>
					</div>
				</div>
								
			</div>
			<div class="cart-checkout col-12">
				<div class="card">
					<div class="card-header bg-secondary border-0">
						<h4 class="font-weight-semi-bold m-0">Cart Summary</h4>
					</div>
					<div class="card-footer border-secondary bg-transparent col-12">
						<div class="d-flex justify-content-between mt-2 col-12">
							<h5 class="font-weight-bold">Total</h5>
							<h5 id="summary-price" class="font-weight-bold">$0.00</h5>
						<button class="purchase-btn btn btn-block btn-primary my-3 py-3 col-4" disabled>Purchase</button>
						<input type="hidden" th:value="${cartId}" id="cartId"/>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- Cart End -->
</body>
</html>